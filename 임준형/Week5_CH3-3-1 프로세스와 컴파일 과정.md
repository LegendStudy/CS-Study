## 3.3.1 프로세스와 컴파일 과정

### 자바 프로젝트의 빌드 및 실행 과정

자바 프로젝트에서 도커를 사용하지 않는 경우와 도커를 사용하는 경우의 빌드 및 실행 과정을 비교하여 설명합니다.

### 도커 없이 빌드 및 실행

소스 코드 작성: 자바 소스 파일(.java)을 작성합니다.

컴파일:

전처리: 자바는 전처리 단계가 없으므로 이 단계는 생략됩니다.

컴파일러: 자바 컴파일러(javac)가 소스 파일을 바이트 코드 파일(.class)로 변환합니다.

패키징: 여러 개의 .class 파일을 하나의 JAR 파일(.jar)로 패키징

실행: JAR 파일을 JVM(Java Virtual Machine)을 통해 실행

`java -jar your-application.jar`

플로우 다이어그램 (도커 없이):

```scss
소스 코드 파일 (.java)
↓
컴파일러 (javac)
↓
바이트 코드 파일 (.class)
↓
패키징 (JAR 파일 생성)
↓
JAR 파일 (.jar)
↓
JVM에서 실행 (java -jar)
```

### 도커를 사용한 빌드 및 실행

소스 코드 작성: 자바 소스 파일(.java)을 작성합니다.

도커 파일 작성: 도커 파일(Dockerfile)을 작성하여 빌드 및 실행 환경을 정의합니다.

컴파일 및 패키징:
- 도커 컨테이너 내에서 컴파일 및 패키징을 수행합니다.
- 전처리: 자바는 전처리 단계가 없으므로 이 단계는 생략됩니다.
- 컴파일러: 도커 컨테이너 내에서 javac를 사용하여 소스 파일을 바이트 코드 파일로 변환합니다.
- 패키징: 여러 개의 .class 파일을 JAR 파일로 패키징합니다.

도커 이미지 생성: 빌드된 JAR 파일을 포함하는 도커 이미지를 생성합니다.

도커 컨테이너 실행: 생성된 도커 이미지에서 컨테이너를 생성하고 JAR 파일을 실행합니다.

### 플로우 다이어그램 (도커 사용)

```scss
소스 코드 파일 (.java)
↓
도커 파일 작성 (Dockerfile)
↓
도커 빌드 (컴파일 및 패키징 포함)
↓
도커 이미지 생성
↓
도커 컨테이너 실행
↓
JAR 파일 (.jar)을 JVM에서 실행
```

도커를 사용한다고 해서 전처리, 컴파일러, 어셈블러, 링커 등의 단계를 생략하지 않습니다.

도커는 이 모든 과정을 컨테이너 내부에서 수행하게 하여 일관된 빌드 및 실행 환경을 제공합니다.

따라서, 도커를 사용해도 기본적인 빌드 과정은 변하지 않으며, 이는 자바 프로젝트에서도 동일하게 적용됩니다.

## 하이퍼바이저 가상화와 컨테이너 가상화 비교

![1_가상화.png](https://raw.githubusercontent.com/LegendStudy/CS-Study/master/임준형/image/week5/1_가상화.png)

이미지에는 두 가지 가상화 방법이 비교되어 있습니다: 

하이퍼바이저 가상화와 컨테이너 가상화입니다.

## 하이퍼바이저 가상화

구성 요소:

서버: 물리적 서버.

Host OS: 물리적 서버에 설치된 운영 체제.

커널: Host OS의 커널.

하이퍼바이저: 가상 머신을 생성하고 관리하는 소프트웨어 (예: VMware, Hyper-V).

Guest OS: 하이퍼바이저 위에서 동작하는 가상 머신의 운영 체제. 각 가상 머신은 자신의 커널을 가지고 있습니다.

### 특징:

- 각 가상 머신은 독립된 운영 체제와 커널을 가집니다.
- 하드웨어 자원을 가상 머신 간에 공유하지만, 각 가상 머신은 전체 운영 체제를 포함하여 무겁습니다.
- 하이퍼바이저는 가상 머신을 관리하고 자원을 할당합니다.

## 컨테이너 가상화

### 구성 요소:
- 서버: 물리적 서버.
- Host OS: 물리적 서버에 설치된 운영 체제.
- 커널: Host OS의 커널. 컨테이너들은 이 커널을 공유합니다.
- 컨테이너: 각각의 컨테이너는 독립된 애플리케이션 및 필요한 라이브러리를 포함하지만, 운영 체제는 공유합니다.

### 특징:

- 모든 컨테이너는 호스트 운영 체제의 커널을 공유합니다.
- 운영 체제를 공유하므로 가상 머신보다 훨씬 가볍고, 자원 사용이 효율적입니다.
- 컨테이너는 애플리케이션 및 필요한 라이브러리만 포함하여 빠른 부팅과 적은 오버헤드를 가집니다.